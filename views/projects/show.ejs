<%- include('../partials/head') %>

<div style="display: flex;">
    <img alt="avatar" src="<%= project.userAvatar %>"" referrerpolicy="no-referrer" >
    <h2><%= project.userName %></h2>
  </div>
    <p><%= project.content %></p>
    <div>
        <h4 style="display: inline-block;">Members Wanted: </h4>
        <p style="display: inline-block;"><%= project.members %></p>
    </div>
</div>

<% if (project.volunteers.length) { %>
    <h3>Volunteers</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Github</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% project.volunteers.forEach(function(v) { %>
          <tr>
            <td><%= v.userName %></td>
            <td><%= v.github %></td>
            <td>
              <% if (user?._id.equals(v.user)) { %>
              <form action="/volunteers/<%= v._id %>?_method=DELETE" class="delete-form" method="POST">
                <button type="submit">X</button>
              </form>
              <% } %>
            </td>
          </tr>
        <% }); %>
      </tbody>
    </table>
  <% } else { %>
    <h3>No Volunteers Yet</h3>
  <% } %>

  <% if (user) { %>
  <br><br><h3>Become a Volunteer</h3>
  <form id="add-volunteer-form" method="POST"
    action="/projects/<%= project._id %>/volunteers">
    
    <label>Github Link:
      <input type="string" name="github">
    </label><br>
    <br><input type="submit" value="Join List">
  </form>
  <% } %>

<%- include('../partials/footer') %>